# Аналитическая система эпидемиологического мониторинга COVID-19

## Описание проекта

Проект представляет собой аналитическую систему для эпидемиологического мониторинга COVID-19 на основе метаданных рентгеновских снимков с использованием Apache PySpark. Система выполняет сбор, обработку, анализ и визуализацию данных из репозитория COVID-19 Chest X-Ray Dataset.

## Структура проекта

```
.
├── analysis.ipynb          # Основной Jupyter notebook с анализом
├── requirements.txt                # Зависимости проекта
├── README.md                       # Документация проекта
└── Presentation.pdf                # Презентация результатов (3 слайда)
```

## Функциональность

### 1. Подготовка окружения
- Настройка Apache Spark
- Конфигурация параметров памяти и партиций

### 2. Загрузка и изучение данных
- Автоматическая загрузка данных с GitHub
- Анализ структуры данных
- Подсчет статистики

### 3. Анализ качества данных
- Выявление пропущенных значений
- Визуализация пропусков
- Анализ аномалий в возрасте (boxplot)

### 4. Предобработка данных (PySpark UDF)
Реализовано 3 User-Defined Functions:
- **parse_date_udf**: парсинг различных форматов дат
- **categorize_age_udf**: категоризация возраста на группы
- **unify_finding_udf**: унификация диагнозов

### 5. SQL-аналитика (5 запросов)
1. Базовая статистика по диагнозам (COUNT, AVG, MIN, MAX, проценты)
2. Распределение по полу и диагнозам
3. Оконная функция: топ-3 самых старших пациентов в каждой группе диагнозов
4. Анализ временных трендов (по годам и месяцам)
5. Статистика по проекциям рентгеновских снимков

### 6. Сохранение в Parquet
- Фильтрация данных (COVID-19, возраст ≥ 18)
- Экспорт в оптимизированный формат Parquet

### 7. Визуализация (4 графика)
1. Круговая диаграмма распределения диагнозов
2. Столбчатая диаграмма по возрастным группам
3. Линейный график временных трендов
4. Heatmap распределения диагнозов по проекциям

## Технологии

- **Apache PySpark 3.5.0**: распределенная обработка данных
- **Pandas 2.0.3**: манипуляция и анализ данных
- **NumPy 1.24.3**: численные вычисления
- **Matplotlib 3.7.2**: визуализация данных
- **Seaborn 0.12.2**: статистическая визуализация
- **Jupyter Notebook**: интерактивная среда

## Требования к системе

- Python 3.8+
- Java 8+ (для Apache Spark)
- 4+ GB RAM (рекомендуется)

## Инструкция по запуску

### 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

### 2. Проверка установки Java

Apache Spark требует наличия Java. Проверьте установку:

```bash
java -version
```

Если Java не установлена, загрузите и установите JDK 8 или новее с [официального сайта Oracle](https://www.oracle.com/java/technologies/downloads/) или через менеджер пакетов:

**macOS:**
```bash
brew install openjdk@11
```

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install openjdk-11-jdk
```

**Windows:**
Загрузите инсталлятор с официального сайта Oracle

### 3. Запуск Jupyter Notebook

```bash
jupyter notebook COVID19_Analysis.ipynb
```

### 4. Выполнение анализа

После открытия notebook:
1. Выполните все ячейки последовательно (Cell → Run All)
2. Или выполняйте ячейки по очереди для пошагового анализа

**Примечание**: Первая загрузка данных может занять некоторое время в зависимости от скорости интернет-соединения.

### 5. Результаты

После выполнения notebook:
- Визуализации отображаются непосредственно в notebook
- Фильтрованные данные сохраняются в директории `covid19_filtered/` в формате Parquet
- SQL-запросы выводят таблицы с результатами анализа

## Датасет

**Источник**: [COVID-19 Chest X-Ray Dataset](https://github.com/ieee8023/covid-chestxray-dataset)

**Поля**:
- `patientid`: идентификатор пациента
- `age`: возраст пациента
- `sex`: пол (M/F)
- `finding`: диагноз
- `view`: проекция рентгеновского снимка
- `date`: дата исследования

## Основные выводы

1. **Распределение диагнозов**: Преобладает COVID-19, что соответствует тематике исследования
2. **Возрастная структура**: Наибольше поражены лица 45+ лет (группа риска)
3. **Гендерное распределение**: Выявлены различия в заболеваемости между полами
4. **Временные тренды**: Прослеживаются волны пандемии
5. **Технические аспекты**: Корреляция между проекциями снимков и типами диагнозов

## Автор

Проект выполнен как итоговая работа по курсу "Архитектура Big Data"

## Лицензия

Датасет предоставляется под открытой лицензией. Используется исключительно в учебных целях.
